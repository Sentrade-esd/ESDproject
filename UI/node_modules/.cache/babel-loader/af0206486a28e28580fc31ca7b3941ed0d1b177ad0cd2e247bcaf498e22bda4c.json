{"ast":null,"code":"var _jsxFileName = \"C:\\\\ESD\\\\Web UI\\\\web_ui\\\\src\\\\Components\\\\Search.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from 'react';\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Search() {\n  _s();\n  const [search, setSearch] = useState('');\n  const [results, setResults] = useState([]);\n  const searchInputRef = useRef();\n  const clearSearch = () => {\n    setSearch('');\n    searchInputRef.current.focus();\n    setResults([]);\n  };\n\n  // const performSearch = (query) => {\n  //     // Replace this with actual API call or search within your data\n  //     // Here as a mock, we randomly return array of 10 results\n  //     return new Promise(resolve => {\n  //         setTimeout(() => {\n  //             resolve(Array(10).fill(0).map((_, i) => `Result ${i + 1}`));\n  //         }, 2000);\n  //     });\n  // }\n\n  const performSearch = async query => {\n    const API_KEY = 'GIC3VJ1I8N8DXJAO';\n    const searchUrl = `https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=${query}&apikey=${API_KEY}`;\n    try {\n      const response = await axios.get(searchUrl);\n      // console.log(response.data.Information);\n      if (response.data.Information) {\n        //Information is only returned on rate limit reached\n        setResults([response.data.Information]);\n        return;\n      }\n      console.log(\"working\");\n      // Check for US ONLY, TODO(?): Let user set the limit of results returned\n      const usResults = response.data.bestMatches.filter(match => match['4. region'] === 'United States');\n      // Return new array where match a single element from the usResults array in each iteration. \n      //For each match (which is likely an object based on the usage), it accesses the value of the property '2. name'. Which is the comapny name \n      return setResultsusResults.map(match => match['2. name']);\n    } catch (error) {\n      console.log(\"caught\");\n      // If there's any other error, set the state to show the error message on the screen\n      setResults(['Error retrieving search results: ' + error.message]);\n      return;\n    }\n  };\n\n  // const handleSearchChange = async(e) => {\n  //     const value = e.target.value;\n  //     setSearch(value);\n  //     if (value) {\n  //         const res = await performSearch(value);\n  //         setResults(res);\n  //     } else {\n  //         setResults([]);\n  //     }\n  // }\n\n  const handleInputChange = e => {\n    setSearch(e.target.value);\n  };\n  const handleInputKeyDown = async e => {\n    if (e.key === 'Enter') {\n      const value = e.target.value.trim();\n      if (value !== '') {\n        // const res = await performSearch(value);\n        // setResults(res || ['No results found']);\n        await performSearch(value);\n      } else {\n        setResults([]);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      className: \"justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        md: 10,\n        lg: 10,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Just imagine the search box works\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group rounded\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"search\",\n            className: \"form-control rounded\",\n            placeholder: \"Search for a Company here to find out more about it!\",\n            value: search,\n            onChange: handleInputChange,\n            onKeyDown: handleInputKeyDown,\n            ref: searchInputRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: clearSearch,\n            className: \"input-group-text border-0\",\n            id: \"search-addon\",\n            \"aria-label\": \"Clear search field\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-search\",\n              \"aria-hidden\": \"true\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this), results.map((result, index) => /*#__PURE__*/_jsxDEV(\"p\", {\n          children: result\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 53\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 9\n  }, this);\n}\n_s(Search, \"GrIYzL3uRd5Z6sMNiMgvYiPqCwg=\");\n_c = Search;\nexport default Search;\n\n// This was old code that would dynamically udpate the companies listed as you typed\n// But since each letter was basically 1 API call, not using\n// Just in case we want to reuse it, alson need to modify the input\n// const handleSearchChange = async(e) => {\n//     const value = e.target.value;  // 1\n//     setSearch(value);  // 2\n//     if (value) {  // 3\n//         const res = await performSearch(value);  // 4\n//         setResults(res || ['No results found']);  // 5\n//     } else {\n//         setResults([]);  // 6\n//     }\n// };\n\n{/* <input type=\"search\" className=\"form-control rounded\" placeholder=\"Search for a Company here to find out more about it!\"\r\n value={search} onChange={handleSearchChange} ref={searchInputRef} /> */}\nvar _c;\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"names":["React","useState","useRef","Container","Row","Col","axios","jsxDEV","_jsxDEV","Search","_s","search","setSearch","results","setResults","searchInputRef","clearSearch","current","focus","performSearch","query","API_KEY","searchUrl","response","get","data","Information","console","log","usResults","bestMatches","filter","match","setResultsusResults","map","error","message","handleInputChange","e","target","value","handleInputKeyDown","key","trim","children","className","md","lg","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","onKeyDown","ref","onClick","id","result","index","_c","$RefreshReg$"],"sources":["C:/ESD/Web UI/web_ui/src/Components/Search.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport axios from 'axios';\r\n\r\n\r\nfunction Search() {\r\n    const [search, setSearch] = useState('');\r\n    const [results, setResults] = useState([]);\r\n    const searchInputRef = useRef();\r\n\r\n    const clearSearch = () => {\r\n        setSearch('');\r\n        searchInputRef.current.focus();\r\n        setResults([]);\r\n    };\r\n\r\n    // const performSearch = (query) => {\r\n    //     // Replace this with actual API call or search within your data\r\n    //     // Here as a mock, we randomly return array of 10 results\r\n    //     return new Promise(resolve => {\r\n    //         setTimeout(() => {\r\n    //             resolve(Array(10).fill(0).map((_, i) => `Result ${i + 1}`));\r\n    //         }, 2000);\r\n    //     });\r\n    // }\r\n\r\n    const performSearch = async(query) => {\r\n        const API_KEY = 'GIC3VJ1I8N8DXJAO';\r\n        const searchUrl = `https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=${query}&apikey=${API_KEY}`;\r\n    \r\n        try {\r\n            const response = await axios.get(searchUrl);\r\n            // console.log(response.data.Information);\r\n            if (response.data.Information) {  //Information is only returned on rate limit reached\r\n                setResults([response.data.Information]);\r\n                return\r\n            }\r\n            console.log(\"working\");\r\n            // Check for US ONLY, TODO(?): Let user set the limit of results returned\r\n            const usResults = response.data.bestMatches.filter(match => match['4. region'] === 'United States');\r\n            // Return new array where match a single element from the usResults array in each iteration. \r\n            //For each match (which is likely an object based on the usage), it accesses the value of the property '2. name'. Which is the comapny name \r\n            return setResultsusResults.map(match => match['2. name']); \r\n            \r\n        } catch (error) {\r\n            console.log(\"caught\");\r\n            // If there's any other error, set the state to show the error message on the screen\r\n            setResults(['Error retrieving search results: ' + error.message]);\r\n            return\r\n            \r\n        }\r\n    }\r\n\r\n    // const handleSearchChange = async(e) => {\r\n    //     const value = e.target.value;\r\n    //     setSearch(value);\r\n    //     if (value) {\r\n    //         const res = await performSearch(value);\r\n    //         setResults(res);\r\n    //     } else {\r\n    //         setResults([]);\r\n    //     }\r\n    // }\r\n\r\n    const handleInputChange = (e) => {\r\n        setSearch(e.target.value);\r\n    };\r\n\r\n    const handleInputKeyDown = async(e) => {\r\n        if (e.key === 'Enter') {\r\n            const value = e.target.value.trim();\r\n            if (value !== '') {\r\n                // const res = await performSearch(value);\r\n                // setResults(res || ['No results found']);\r\n                await performSearch(value);\r\n            } else {\r\n                setResults([]);\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Container>\r\n            <Row className=\"justify-content-center\">\r\n                <Col md={10} lg={10}>\r\n                    <h1>Just imagine the search box works</h1>\r\n                    <div className=\"input-group rounded\">\r\n                    <input type=\"search\" className=\"form-control rounded\" placeholder=\"Search for a Company here to find out more about it!\"\r\n                    value={search} onChange={handleInputChange} onKeyDown={handleInputKeyDown} ref={searchInputRef} />\r\n                        <button onClick={clearSearch} className=\"input-group-text border-0\" id=\"search-addon\" aria-label=\"Clear search field\">\r\n                            <i className=\"fas fa-search\" aria-hidden=\"true\"></i>\r\n                        </button>\r\n                    </div>\r\n                    {/* For each result, create a new p tag with the result */}\r\n                    {results.map((result, index) => <p key={index}>{result}</p>)}\r\n                </Col>\r\n            </Row>\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default Search;\r\n\r\n\r\n// This was old code that would dynamically udpate the companies listed as you typed\r\n// But since each letter was basically 1 API call, not using\r\n// Just in case we want to reuse it, alson need to modify the input\r\n// const handleSearchChange = async(e) => {\r\n//     const value = e.target.value;  // 1\r\n//     setSearch(value);  // 2\r\n//     if (value) {  // 3\r\n//         const res = await performSearch(value);  // 4\r\n//         setResults(res || ['No results found']);  // 5\r\n//     } else {\r\n//         setResults([]);  // 6\r\n//     }\r\n// };\r\n\r\n\r\n{/* <input type=\"search\" className=\"form-control rounded\" placeholder=\"Search for a Company here to find out more about it!\"\r\nvalue={search} onChange={handleSearchChange} ref={searchInputRef} /> */}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}