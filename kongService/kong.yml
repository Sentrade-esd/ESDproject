_format_version: "1.1"

plugins:  
  - name: prometheus
  - name: cors
    config:
      origins:
        - "*"
      methods:
        - GET
        - POST
        - PUT
        - DELETE
        - PATCH
        - OPTIONS
      headers:
        - Accept
        - Accept-Version
        - Content-Length
        - Content-MD5
        - Content-Type
        - Date
        - X-Auth-Token
      exposed_headers:
        - X-Auth-Token
      credentials: true
      max_age: 3600


services: 
  - name: sentiment-service
    url: http://sentiment_app:5001/
    routes:
      - name: welcome-route
        paths:
          - /sentimentAPI
        methods:
          - GET
        strip_path: false

      - name: query-route
        paths:
          - /sentimentAPI/sentiment_query  # Define the full path including the base path
        methods:
          - GET
        strip_path: false

      - name: comment-route
        paths:
          - /sentimentAPI/sentiment_comment  # Define the full path including the base path
        methods:
          - POST
        strip_path: false

  - name: scraper-service
    url: http://scraper:5000/
    routes:
      - name: scrapeCurrentPrice-route
        methods:
          - GET
        paths:
          - /scraper/scrapeCurrentPrice
        strip_path: false

  - name: watchlist-service
    url: http://watchlist:3000/
    routes:
      - name: watchlist-add
        paths:
          - /watchlist/add
        methods:
          - POST
        strip_path: false
        
      - name: watchlist-remove
        paths:
          - /watchlist/remove
        methods:
          - POST
        strip_path: false

      - name: watchlist-getuser
        paths:
          - /watchlist/user
        methods:
          - GET
        strip_path: false

      - name: watchlist-getcompany
        paths:
          - /watchlist/company
        methods:
          - GET
        strip_path: false

  - name: user-service
    url: http://user_service:6000/
    routes:
      - name: user
        paths:
          - /user
        methods:
          - GET
          - POST
        strip_path: false

      - name: get-user
        paths:
          - /user/getUser
        methods:
          - GET
        strip_path: false


  - name: comments-service
    url: http://comments_service:6001/
    routes:
      - name: comments
        paths:
          - /comments
        methods:
          - POST
        strip_path: false

      - name: get-company
        paths:
          - /comments/
        methods:
          - GET
        strip_path: false

  - name: transactions-service
    url: http://transactions:6002/
    routes:
      - name: transaction-all-route
        paths:
        - /transaction
        methods:
        - GET
        strip_path: false

      - name: transaction-total-by-id-route
        paths:
        - /transaction/total
        methods:
        - GET
        strip_path: false

      - name: transaction-newTrade-route
        paths:
        - /transaction/newTrade
        methods:
        - POST
        strip_path: false

      - name: transaction-updateTrade-route
        paths:
        - /transaction/updateTrade
        methods:
        - POST
        strip_path: false

      - name: transaction-checkBalance-route
        paths:
        - /transaction/checkBalance
        methods:
        - GET
        strip_path: false

      - name: transaction-setup-route
        paths:
        - /transaction/setup
        methods:
        - POST
        strip_path: false

  - name: follow-trade-service
    url: http://follow_trades:4001/
    routes:
      - name: root-route
        methods:
        - GET
        paths:
        - /
        strip_path: false

      - name: followTrade-buy-route
        methods:
        - POST
        paths:
        - /followTrade/buy
        strip_path: false

  - name: telebot-service
    url: http://telebot:3002/
    routes: 
      - name: register-user
        methods:
          - POST
        paths:
          - /register       #### temporary
        strip_path: false

  